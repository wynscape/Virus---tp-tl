<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Virus Interactive</title>
    <style>
        :root { --bg: #0f172a; --text: #f8fafc; --accent: #38bdf8; --dim: rgba(248, 250, 252, 0.25); }
        body { background: var(--bg); color: var(--text); font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; margin: 0; display: flex; flex-direction: column; align-items: center; justify-content: start; min-height: 100vh; overflow-x: hidden; touch-action: manipulation; }
        header { text-align: center; margin: 2rem 0; }
        h1 { margin: 0; font-weight: 300; letter-spacing: 2px; text-transform: uppercase; font-size: 1.5rem; }
        h2 { margin: 0; font-weight: 600; font-size: 1.8rem; }
        h3 { margin: 0; font-size: 90%; color: var(--dim); font-weight: 400; }
        .stage { width: 90%; max-width: 400px; display: flex; flex-direction: column; gap: 20px; margin-bottom: 2rem; }
        .cell { border: 1px solid var(--dim); border-radius: 12px; padding: 15px; background: rgba(255,255,255,0.03); position: relative; }
        .label { font-size: 0.7rem; color: var(--accent); margin-bottom: 10px; text-transform: uppercase; letter-spacing: 1px; }
        .genome { height: 60px; border: 2px dashed var(--dim); border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 0.9rem; transition: all 0.3s; }
        .genome.active { border-color: var(--accent); background: rgba(56, 189, 248, 0.1); }
        .tray { width: 90%; max-width: 400px; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 15px; display: flex; justify-content: space-around; gap: 10px; }
        .item { padding: 10px 15px; background: var(--text); color: var(--bg); border-radius: 20px; font-weight: bold; font-size: 0.8rem; cursor: grab; user-select: none; touch-action: none; z-index: 10; }
        .info { width: 90%; max-width: 400px; font-size: 0.85rem; line-height: 1.4; color: #94a3b8; text-align: center; min-height: 80px; margin-top: 10px; }
        #overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 100; }
    </style>
</head>
<body>

<header>
    <h1>Virus</h1>
    <h2>Flu Virus vs HIV</h2>
    <h3>Transcription, translation</h3>
</header>

<div class="stage">
    <div class="cell" id="flu-cell">
        <div class="label">Flu Virus (-ssRNA)</div>
        <div class="genome" id="flu-target" data-type="flu">Drop Enzyme Here</div>
    </div>
    <div class="cell" id="hiv-cell">
        <div class="label">HIV Virus (+ssRNA)</div>
        <div class="genome" id="hiv-target" data-type="hiv">Drop Enzyme Here</div>
    </div>
</div>

<div class="tray" id="tray">
    <div class="item" id="rdrp" data-part="viral_rdrp">Viral RdRp</div>
    <div class="item" id="ribosome" data-part="host_ribosome">Host Ribosome</div>
</div>

<div class="info" id="info-box">Drag a component to the correct viral genome to begin.</div>

<div id="overlay"></div>

<script>
/* Obfuscated Core Logic */
(function(_0x1,_0x2){const _0x3=function(_0x4){while(--_0x4){_0x1['push'](_0x1['shift']());}};_0x3(++_0x2);}(['data-part','info-box','host_ribosome','Target','innerHTML','flu-target','hiv-target','style','color','Viral RdRp is required to convert -ssRNA to +ssRNA because host cells lack enzymes that use RNA as a template.','Host Ribosomes bind directly to +ssRNA. Translation occurs immediately without conversion.','viral_rdrp','#38bdf8','#ef4444','getBoundingClientRect','addEventListener','touchstart','touchmove','touchend','clientX','clientY'],0x1b4));const _0x5=function(_0x1,_0x2){const _0x3=['data-part','info-box','host_ribosome','Target','innerHTML','flu-target','hiv-target','style','color','Viral RdRp is required to convert -ssRNA to +ssRNA because host cells lack enzymes that use RNA as a template.','Host Ribosomes bind directly to +ssRNA. Translation occurs immediately without conversion.','viral_rdrp','#38bdf8','#ef4444','getBoundingClientRect','addEventListener','touchstart','touchmove','touchend','clientX','clientY'];return _0x3[_0x1];};

let activeItem = null;
let offset = { x: 0, y: 0 };
const items = document.querySelectorAll('.item');
const info = document.getElementById('info-box');

items.forEach(item => {
    item.addEventListener('touchstart', (e) => {
        activeItem = item;
        const touch = e.touches[0];
        const rect = item.getBoundingClientRect();
        offset.x = touch.clientX - rect.left;
        offset.y = touch.clientY - rect.top;
        item.style.position = 'fixed';
        item.style.width = (rect.width) + 'px';
        moveAt(touch.clientX, touch.clientY);
    });

    document.addEventListener('touchmove', (e) => {
        if (!activeItem) return;
        const touch = e.touches[0];
        moveAt(touch.clientX, touch.clientY);
    });

    document.addEventListener('touchend', (e) => {
        if (!activeItem) return;
        const touch = e.changedTouches[0];
        checkDrop(touch.clientX, touch.clientY);
        resetItem();
    });
});

function moveAt(x, y) {
    activeItem.style.left = (x - offset.x) + 'px';
    activeItem.style.top = (y - offset.y) + 'px';
}

function resetItem() {
    activeItem.style.position = 'static';
    activeItem.style.width = 'auto';
    activeItem = null;
}

function checkDrop(x, y) {
    const targets = ['flu-target', 'hiv-target'];
    const part = activeItem.getAttribute('data-part');
    
    targets.forEach(tid => {
        const target = document.getElementById(tid);
        const rect = target.getBoundingClientRect();
        if (x > rect.left && x < rect.right && y > rect.top && y < rect.bottom) {
            if (tid === 'flu-target' && part === 'viral_rdrp') {
                target.innerHTML = "Converted to +RNA";
                target.style.borderColor = "#38bdf8";
                info.innerHTML = "<b>Correct:</b> Flu is -ssRNA. It brings its own RdRp because human cells have no enzyme that uses RNA as a template for transcription.";
                info.style.color = "#38bdf8";
            } else if (tid === 'hiv-target' && part === 'host_ribosome') {
                target.innerHTML = "Translation Active";
                target.style.borderColor = "#38bdf8";
                info.innerHTML = "<b>Correct:</b> HIV is +ssRNA. It mimics host mRNA, allowing host ribosomes to bind and translate it into protein directly.";
                info.style.color = "#38bdf8";
            } else {
                info.innerHTML = "That component doesn't fit here. Think about the RNA polarity and enzyme source.";
                info.style.color = "#ef4444";
            }
        }
    });
}
</script>
</body>
</html>
